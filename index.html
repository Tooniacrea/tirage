<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tirage des r√¥les du jeu TikTok</title>
<style>
body { font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; padding: 10px; margin: 0; background: linear-gradient(to right, #f0f0f0, #d0e7ff);}
h1 { text-align: center; margin-bottom: 10px; }
button { margin-bottom: 15px; padding: 12px 25px; font-size: 1.1rem; border-radius: 8px; border: none; cursor: pointer; background-color: #4CAF50; color: white; width: 90%; max-width: 300px; }
.cards-container { display: flex; flex-direction: column; align-items: center; gap: 15px; width: 95%; max-width: 450px; }
.card { width: 80vw; max-width: 300px; height: 80vw; max-height: 300px; perspective: 1200px; opacity: 0; transform: translateY(30px); transition: transform 0.5s ease, opacity 0.5s ease; border-radius: 12px; cursor: pointer;}
.card.show { transform: translateY(0); opacity: 1; }
.card-inner { position: relative; width: 100%; height: 100%; text-align: center; transform-style: preserve-3d; transition: transform 0.8s ease; }
.card.flipped .card-inner { transform: rotateY(180deg); }
.card-front, .card-back { position: absolute; width: 100%; height: 100%; border-radius: 12px; backface-visibility: hidden; display: flex; flex-direction: column; font-weight: bold; font-size: 14px; overflow: hidden; padding: 0; }
.card-front { justify-content: center; align-items: center; font-size: 1.4rem; color: white; }
.card-back { transform: rotateY(180deg); justify-content: flex-start; align-items: center; padding: 5px; }
.card-back .player-name { font-size: 1rem; font-weight: bold; margin: 8px 0; color: black; }
.card-back .text-container { flex: 1; display: flex; align-items: center; justify-content: center; text-align: center; font-size: 1rem; padding: 0 10px; color: black; }
.card-front .click-text { font-size: 0.8rem; margin-top: 5px; color: #fff; }
/* Animation suspense */
@keyframes suspense { 0% { transform: rotate(0deg) scale(1); } 10% { transform: rotate(15deg) scale(1.05); } 20% { transform: rotate(-15deg) scale(1.05); } 30% { transform: rotate(10deg) scale(1.05); } 40% { transform: rotate(-10deg) scale(1.05); } 50% { transform: rotate(5deg) scale(1.05); } 60% { transform: rotate(-5deg) scale(1.05); } 70% { transform: rotate(3deg) scale(1.05); } 80% { transform: rotate(-3deg) scale(1.05); } 90% { transform: rotate(2deg) scale(1.05); } 100% { transform: rotate(0deg) scale(1); } }
.animate-suspense { animation: suspense 3s ease-in-out; }
table { border-collapse: collapse; margin-top: 20px; width: 95%; max-width: 450px; }
th, td { border: 1px solid #444; padding: 8px; text-align: left; }
th { background-color: #4CAF50; color: white; }
</style>
</head>
<body>

<h1>Tirage des r√¥les du jeu TikTok üé¥</h1>
<button id="nextCard">Suivant</button>
<div class="cards-container" id="cardsContainer"></div>
<div id="recapTable"></div>

<script>
const people = ["Anto","Carine","C√©cilia","Dada","Dim","Guizmo","Magali","Pupuce","Toon","Will"];
const playerColors = {
    "Anto": "#FF6B6B","Carine": "#6BCB77","C√©cilia": "#4D96FF","Dada": "#FFD93D","Dim": "#FF6EFF",
    "Guizmo": "#00C2BA","Magali": "#FFA500","Pupuce": "#C70039","Toon": "#8A2BE2","Will": "#FF4500",
    "Pour tous les joueurs": "#000000"
};
const animalCris = {
    "Anto": "√âl√©phant","Carine": "Oiseau","C√©cilia": "Singe","Dada": "Coq","Dim": "Poule",
    "Guizmo": "Ch√®vre","Magali": "Vache","Pupuce": "Chat","Toon": "Crapaud","Will": "Cheval"
};
let gages = [
    "A chaque fois que quelqu'un √©crit un mot avec le son 'ou' dans le t'chat, tu devras faire Tarzan",
    "Tu devras appeler Anto 'papa' et Pupuce 'maman'",
    "A chaque fois que quelqu'un rigole, tu devras dire 'Je me suis mis du Kiri partout'",
    "Tu devras r√©p√©ter le dernier mot de chaque phrase de Toon",
    "Tu devras crier 'Yeehaw' (comme les cowboys) √† chaque fois qu'il y a un cadeau",
    "Tu devras dire 'Chouquette' √† chaque fois que quelqu'un dit ou √©crit 'Bonsoir, coucou, salut, bonjour...'",
    "Tu devras te mettre au garde √† vous √† chaque fois que Guizmo parle",
    "Tu devras appeler tout le monde 'Monique'",
    "Tu devras faire 'Cocorico' toutes les 10 minutes (√† 21h00, 21h10, 21h20...)",
    "Tu devras appeler Wilfried 'Grand Ma√Ætre' et Dim 'Maitresse'",
    "A chaque fois que quelqu'un fait une vanne, tu devras dire 'Qu'est-ce qu'on dit au chauffeur ?'",
    "Tu devras bailler bruyamment √† chaque fois que Magali parle",
    "A chaque fois que Carine parle, tu devras dire 'Tu peux r√©p√©ter ?'",
    "A chaque fois que Dim parle, tu devras dire 'OK, √ßa marche' et faire le signe OK",
    "Tu devras faire un doigt d'honneur d√®s qu'on te parle mais en utilisant un mauvais doigt"
];
const gagesInterdits = {
    "Tu devras appeler Anto 'papa' et Pupuce 'maman'": ["Anto","Pupuce"],
    "Tu devras r√©p√©ter le dernier mot de chaque phrase de Toon": ["Toon"],
    "Tu devras te mettre au garde √† vous √† chaque fois que Guizmo parle": ["Guizmo"],
    "Tu devras appeler Wilfried 'Grand Ma√Ætre' et Dim 'Maitresse'": ["Will","Dim"],
    "Tu devras bailler bruyamment √† chaque fois que Magali parle": ["Magali"],
    "A chaque fois que Carine parle, tu devras dire 'Tu peux r√©p√©ter ?'": ["Carine"],
    "A chaque fois que Dim parle, tu devras dire 'OK, √ßa marche' et faire le signe OK": ["Dim"]
};
const cardGlobal = "Tu devras dire 'ET BAAAAM' d√®s que quelqu'un descend et faire comme √† Roland Garros d√®s que quelqu'un monte 'PAPAPA PAPAPA PALALAPA OLEEE√©.'";

function shuffle(array){for(let i=array.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[array[i],array[j]]=[array[j],array[i]];}return array;}

let deck = [];
deck.push({text: cardGlobal, player:"Pour tous les joueurs", type:"global"});
deck = deck.concat(shuffle(people.map(p=>({text:"Cri de l'animal : "+animalCris[p], player:p, type:"cri"}))));

let gagesCards = [];
people.forEach(p=>{
    let gage;
    do { gage = gages[Math.floor(Math.random()*gages.length)]; }
    while(gagesInterdits[gage]?.includes(p));
    gages = gages.filter(g=>g!==gage);
    gagesCards.push({text:"Gage : "+gage, player:p, type:"gage"});
});
deck = deck.concat(shuffle(gagesCards));

const cardsContainer = document.getElementById("cardsContainer");
const recapDiv = document.getElementById("recapTable");
let currentIndex = 0;
let recapData = {};

function createCard(cardData){
    const card = document.createElement("div");
    card.classList.add("card");
    card.style.background = playerColors[cardData.player];
    const inner = document.createElement("div"); inner.classList.add("card-inner");

    const front = document.createElement("div"); front.classList.add("card-front");
    front.textContent = cardData.type==="global"?"Pour tous les joueurs":cardData.player;

    // Ajouter "(cliquez pour afficher)" pour les cartes gages
    if(cardData.type==="gage" && cardData.player!=="Pour tous les joueurs"){
        const clickText = document.createElement("div");
        clickText.classList.add("click-text");
        clickText.textContent = "(cliquez pour afficher)";
        front.appendChild(clickText);
    }

    const back = document.createElement("div"); back.classList.add("card-back");
    const nameDiv = document.createElement("div"); nameDiv.classList.add("player-name");
    nameDiv.textContent = cardData.type==="global"?"Pour tous les joueurs":cardData.player;
    const textDiv = document.createElement("div"); textDiv.classList.add("text-container"); 
    textDiv.textContent = cardData.text;
    textDiv.style.color="black";
    if(cardData.type==="global"){ front.style.color="white"; textDiv.style.color="white"; nameDiv.style.color="white";}
    back.appendChild(nameDiv); back.appendChild(textDiv);
    inner.appendChild(front); inner.appendChild(back);
    card.appendChild(inner);

    if(cardData.type==="gage"){
        front.style.color="black";
        front.addEventListener("click", ()=>{
            card.classList.add("animate-suspense");
            setTimeout(()=>{
                card.classList.remove("animate-suspense");
                card.classList.add("flipped");
                recapData[cardData.player+"_gage"]=cardData.text.replace("Gage : ","");
                if(currentIndex>=deck.length) showRecap();
            },3000);
        });
    } else {
        setTimeout(()=>{
            card.classList.add("show");
            card.classList.add("flipped");
            recapData[cardData.player+"_cri"]=cardData.text.replace("Cri de l'animal : ","");
        },500);
    }
    return card;
}

function nextCard(){
    if(currentIndex>=deck.length){ 
        document.getElementById("nextCard").style.display="none"; 
        showRecap();
        return; 
    }
    const cardData = deck[currentIndex];
    const card = createCard(cardData);
    cardsContainer.prepend(card); // derni√®re carte en haut
    card.classList.add("show");
    currentIndex++;
}

document.getElementById("nextCard").addEventListener("click", nextCard);

function showRecap(){
    let html="<table><tr><th>Joueur</th><th>Cri</th><th>Gage</th></tr>";
    people.forEach(p=>{
        html+=`<tr>
            <td style="background-color:${playerColors[p]}; font-weight:bold;">${p}</td>
            <td>${recapData[p+"_cri"]||""}</td>
            <td>${recapData[p+"_gage"]||""}</td>
        </tr>`;
    });
    html+="</table>";
    recapDiv.innerHTML = html;
}
</script>

</body>
</html>
