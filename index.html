<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tirage des rÃ´les du jeu TikTok</title>
<style>
body {
    font-family: 'Segoe UI', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 10px;
    margin: 0;
    background: linear-gradient(to right, #f0f0f0, #d0e7ff);
}

h1 {
    color: #333;
    text-align: center;
    font-size: 1.4rem;
    margin-bottom: 10px;
}

.container {
    display: flex;
    flex-direction: column;
    gap: 15px;
    align-items: center;
    width: 95%;
    max-width: 450px;
}

.player {
    display: flex;
    flex-direction: column;
    align-items: center;
    border-radius: 12px;
    padding: 8px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    width: 100%;
    transition: box-shadow 0.5s ease;
}

.player.active {
    box-shadow: 0 0 20px 5px gold;
}

.player-name {
    font-weight: bold;
    margin-bottom: 8px;
    font-size: 1rem;
}

.cards-container {
    display: flex;
    flex-wrap: wrap; /* Pour mobile : cartes passent Ã  la ligne si besoin */
    gap: 10px;
    justify-content: center;
    width: 100%;
}

.card {
    width: 45vw;      /* largeur relative Ã  l'Ã©cran */
    max-width: 220px;
    height: 65vw;     /* hauteur relative Ã  la largeur */
    max-height: 340px;
    perspective: 1200px;
    transform: translateY(50px);
    opacity: 0;
    transition: transform 0.5s ease, opacity 0.5s ease;
    border: 2px solid #fff;
    border-radius: 12px;  
}

.card.show {
    transform: translateY(0);
    opacity: 1;
}

.card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    text-align: center;
    transition: transform 0.8s cubic-bezier(0.68,-0.55,0.265,1.55);
    transform-style: preserve-3d;
}

.card.flipped .card-inner {
    transform: rotateY(180deg);
}

.card-front, .card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 12px;
    backface-visibility: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 14px;
    padding: 5px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    text-align: justify;
    overflow: hidden;
}

.text-container {
    max-width: 90%;
    word-wrap: break-word;
    color: black;
    font-size: 0.9rem;
}

.card-back {
    transform: rotateY(180deg);
}

@keyframes shake {
    0% { transform: rotate(0deg); }
    20% { transform: rotate(5deg); }
    40% { transform: rotate(-5deg); }
    60% { transform: rotate(3deg); }
    80% { transform: rotate(-3deg); }
    100% { transform: rotate(0deg); }
}

.shake {
    animation: shake 0.5s;
}

button {
    margin-top: 15px;
    padding: 12px 25px;
    font-size: 1.1rem;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background-color: #4CAF50;
    color: white;
    width: 90%;
    max-width: 300px;
}
</style>
</head>
<body>

<h1>Tirage des rÃ´les du jeu TikTok ðŸŽ´</h1>

<div class="container" id="playersContainer"></div>

<button id="drawCards">Attribuer les cartes</button>

<script>
// Liste des personnes
const people = ["Anto", "Carine", "CÃ©cilia", "Dada", "Dim", "Guizmo", "Magali", "Pupuce", "Toon", "Will"];
people.sort();

// Mapping animal/cri
const animalCris = {
    "Anto": "Ã‰lÃ©phant",
    "Carine": "Oiseau",
    "CÃ©cilia": "Singe",
    "Dada": "Coq",
    "Dim": "Poule",
    "Guizmo": "ChÃ¨vre",
    "Magali": "Vache",
    "Pupuce": "Chat",
    "Toon": "Crapaud",
    "Will": "Cheval"
};

// Liste des gages
const gages = [
    "A chaque fois que quelqu'un Ã©crit un mot avec le son 'ou' dans le t'chat, tu devras faire Tarzan",
    "Tu devras appeler Anto 'papa' et Pupuce 'maman'",
    "A chaque fois que quelqu'un rigole, tu devras dire 'Je me suis mis du Kiri partout'",
    "Tu devras rÃ©pÃ©ter le dernier mot de chaque phrase de Toon",
    "Tu devras crier 'Yeehaw' (comme les cowboys) Ã  chaque fois qu'il y a un cadeau",
    "Tu devras dire 'Chouquette' Ã  chaque fois que quelqu'un dit ou Ã©crit 'Bonsoir, coucou, salut, bonjour...'",
    "Tu devras te mettre au garde Ã  vous Ã  chaque fois que Guizmo parle",
    "Tu devras appeler tout le monde 'Monique'",
    "Tu devras faire 'Cocorico' toutes les 10 minutes (Ã  21h00, 21h10, 21h20...)",
    "Tu devras appeler Wilfried 'Grand MaÃ®tre' et Dim 'Maitresse'",
    "A chaque fois que quelqu'un fait une vanne, tu devras dire 'Qu'est-ce qu'on dit au chauffeur ?'",
    "Tu devras bailler bruyamment Ã  chaque fois que Magali parle",
    "A chaque fois que Carine parle, tu devras dire 'Tu peux rÃ©pÃ©ter ?'",
    "A chaque fois que Dim parle, tu devras dire 'OK, Ã§a marche' et faire le signe OK",
    "Tu devras faire un doigt d'honneur dÃ¨s qu'on te parle mais en utilisant un mauvais doigt"
];

// Restrictions gages
const gagesInterdits = {
    "Tu devras appeler Anto 'papa' et Pupuce 'maman'": ["Anto","Pupuce"],
    "Tu devras rÃ©pÃ©ter le dernier mot de chaque phrase de Toon": ["Toon"],
    "Tu devras te mettre au garde Ã  vous Ã  chaque fois que Guizmo parle": ["Guizmo"],
    "Tu devras appeler Wilfried 'Grand MaÃ®tre' et Dim 'Maitresse'": ["Will","Dim"],
    "Tu devras bailler bruyamment Ã  chaque fois que Magali parle": ["Magali"],
    "A chaque fois que Carine parle, tu devras dire 'Tu peux rÃ©pÃ©ter ?'": ["Carine"],
    "A chaque fois que Dim parle, tu devras dire 'OK, Ã§a marche' et faire le signe OK": ["Dim"]
};

// TroisiÃ¨me carte fixe
const card3Text = "Tu devras dire 'ET BAAAAM' dÃ¨s que quelqu'un descend et faire comme Ã  Roland Garros dÃ¨s que quelqu'un monte 'PAPAPA PAPAPA PALALAPA OLEEEÃ©.'";

// Couleurs uniques
const playerColors = {
    "Anto": "#FF6B6B",
    "Carine": "#6BCB77",
    "CÃ©cilia": "#4D96FF",
    "Dada": "#FFD93D",
    "Dim": "#FF6EFF",
    "Guizmo": "#00C2BA",
    "Magali": "#FFA500",
    "Pupuce": "#C70039",
    "Toon": "#8A2BE2",
    "Will": "#FF4500"
};

// Affichage des joueurs
const playersContainer = document.getElementById("playersContainer");
people.forEach(name => {
    const div = document.createElement("div");
    div.classList.add("player");
    div.dataset.name = name;

    const nameDiv = document.createElement("div");
    nameDiv.classList.add("player-name");
    nameDiv.textContent = name;

    div.appendChild(nameDiv);
    playersContainer.appendChild(div);
});

// CrÃ©ation d'une carte
function createCard(text, color) {
    const card = document.createElement("div");
    card.classList.add("card");
    card.style.background = color;
    card.style.border = "2px solid #fff";

    const inner = document.createElement("div");
    inner.classList.add("card-inner");

    const front = document.createElement("div");
    front.classList.add("card-front");
    const frontText = document.createElement("div");
    frontText.classList.add("text-container");
    frontText.textContent = "Carte";
    front.appendChild(frontText);

    const back = document.createElement("div");
    back.classList.add("card-back");
    const backText = document.createElement("div");
    backText.classList.add("text-container");
    backText.textContent = text;
    back.appendChild(backText);

    inner.appendChild(front);
    inner.appendChild(back);
    card.appendChild(inner);
    return card;
}

// Gage valide
function getValidGage(playerName, gagesList) {
    let attempts = 0;
    let gage;
    do {
        gage = gagesList[Math.floor(Math.random() * gagesList.length)];
        attempts++;
        if (attempts > 50) break;
    } while (gagesInterdits[gage]?.includes(playerName));
    return gage;
}

// Tirage joueur par joueur
async function drawCards() {
    for (let i = 0; i < people.length; i++) {
        const name = people[i];
        const playerDiv = [...playersContainer.children].find(p => p.dataset.name === name);

        // Surbrillance
        document.querySelectorAll('.player').forEach(p => p.classList.remove('active'));
        playerDiv.classList.add('active');

        playerDiv.querySelectorAll(".cards-container").forEach(c => c.remove());
        const container = document.createElement("div");
        container.classList.add("cards-container");
        const color = playerColors[name];

        const card1 = createCard("Cri de l'animal : " + animalCris[name], color);
        const card2Gage = getValidGage(name, gages);
        const card2 = createCard("Gage : " + card2Gage, color);
        const card3 = createCard(card3Text, color);

        const cards = [card1, card2, card3];
        cards.forEach(card => container.appendChild(card));
        playerDiv.appendChild(container);

        for (let j = 0; j < cards.length; j++) {
            await new Promise(resolve => setTimeout(resolve, 4000));
            const card = cards[j];
            card.classList.add("show");
            card.classList.add("shake");
            setTimeout(() => {
                card.classList.remove("shake");
                card.classList.add("flipped");
            }, 500);
        }

        playerDiv.classList.remove('active');
    }

    document.getElementById("drawCards").style.display = "none";
}

document.getElementById("drawCards").addEventListener("click", drawCards);
</script>

</body>
</html>
